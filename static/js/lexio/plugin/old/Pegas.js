// Generated by CoffeeScript 1.7.1
(function() {
  Object.entity.define({
    id: "lexio.plugin.Normalizer extends lexio.Plugin",
    requires: ["lib://peg-0.7.0", 'peg/normalize_parser.pegjs'],
    methods: function(_super) {
      return {
        performImpl: function(err, ev) {
          if (this.parser) {
            ev.normalizedInput = this.parser.parse(ev.input);
          }
        },
        grammarChanged: function(ev) {
          var ex;
          if (ev.value) {
            try {
              this.parser = PEG.buildParser(ev.value);
            } catch (_error) {
              ex = _error;
              console.error("Can't create parser", ex);
            }
          }
        }
      };
    }
  });

}).call(this);
