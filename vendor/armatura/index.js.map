{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/compile.js","webpack:///./lib/component.js","webpack:///./lib/dom.js","webpack:///./lib/fragment.js","webpack:///./lib/index.js","webpack:///./lib/register.js","webpack:///./lib/render.js","webpack:///./lib/resolve.js","webpack:///./lib/xml.js"],"names":["VALUES","RE_SINGLE_PLACEHOLDER","RE_PLACEHOLDER","res","key","split","id","deep","target","app","resources","length","reduce","r","k","pipe","value","args","fn","call","$","apply","impl","map","a","prop","slice","ex","console","error","expression","v","placeholder","includes","match","trim","stringInterpolation","fnx","pattern","replace","s","expr","push","c","idx","pipes","initGettr","pipec","withPipes","initialValue","pk","assignKeyValue","acc","val","makeApplicator","get","hasSlot","content","forEach","e","tag","filterMapKey","src","Map","set","compileFor","attrs","uid","nodes","itemId","$for","inits","connect","rr","$data","owner","updates","$nodes","emptyNode","find","compileNode","filter","loadingNode","itemNode","compileIf","aIf","iff","$if","neg","applicator","gttr","$then","ifElse","ifThen","then","compileTag","$tag","compile","has","ref","aProps","getter","Object","assign","v2","ekey","emitter","data","cb","emit","initials","node","COUNTER","nextId","p","methodName","x","pre","toUpperCase","bindFn","f","$boundFnMap","bound","bind","up","upAsync","promise","racer","raceCondition","akey","propGetter","$propFnMap","path","gettr","extractor1","$$","undefined","Component","Ctor","options","parent","props","ctx","elt","hidden","defer","cursor","prevElt","render","resolveTemplate","constructor","$TEMPLATE","isDone","isInited","init","d","done","children","nextElt","defered","Î”","changed","notify","entries","their","setter","propId","listeners","notifying","uuid","type","subscribe","event","warn","method","ReferenceError","result","log","COUNTERS","$weak","counter","camelize","sep","jn","i","join","DOM_SETTERS","textContent","disabled","cl","fl","eq","indexOf","className","selected","checked","$dataset","keys","dataset","click","setAttribute","ev","$attributes","blur","dblclick","scroll","getAttribute","keypress","keyCode","setTimeout","focus","enter","change","toggle","DOM_VALUE_COMPARATORS","_","mine","Element","document","createTextNode","createElement","applyAttributes","lstnrs","$listeners","removeEventListener","parentElement","removeChild","delta","before","nextSibling","firstChild","appendChild","insertBefore","theirs","mines","prototype","hasOwnProperty","def","fnValue","addEventListener","removeAttribute","WebClientApp","rootElement","body","launch","types","App","template","name","NAME","registerTypes","concat","window","requestAnimationFrame","Fragment","FragmentFor","Error","index","$ownerImpl","create","$owner","FragmentIf","FragmentTag","ANY","fnName","ctor","exec","toString","REGISTRY","reg","ctr","text","TEMPLATE","T","parseXML","getByTag","$content","size","cc","ch","resolveSlot","vv","resolveTemplateArray","tmpl","m","t","resolveProps","resolveRegular","RE_XML_ENTITY","RE_XML_COMMENT","RE_ATTRS","RE_ESCAPE_XML_ENTITY","RE_XML_TAG","SINGLE_TAGS","SUBST_XML_ENTITY","amp","gt","lt","quot","nbsp","ESCAPE_XML_ENTITY","RE_EMPTY","FN_ESCAPE_XML_ENTITY","charCodeAt","FN_XML_ENTITY","substring","String","fromCharCode","decodeXmlEntities","escapeXml","skipQoutes","UID","parseAttrs","stringifyAttrs","Node","stringify","tab","sattrs","ssubs","stext","_s","lastIndex","addChild","setText","input","Math","max","min","shift","unshift","getChild"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/index.js\");\n","\nconst VALUES = { true: true, false: false, null: null };\nconst RE_SINGLE_PLACEHOLDER = /^\\{([^}]+)\\}$/;\nconst RE_PLACEHOLDER = /\\{([^}]+)\\}/g;\n\nfunction res(key) {\n  const [id, ...deep] = key.split('.');\n  const target = id === 'app' ? this.app : this.app.resources[id];\n  if (deep.length === 0) {\n    return target;\n  }\n  if (deep.length === 1) {\n    return target[deep[0]];\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n\nfunction pipe(value, key) {\n  const [id, ...args] = key.split(':')\n  try {\n    const fn = res.call(this, id);\n    let $ = this;\n    return fn.apply($.impl, [value, ...args.map(a => a[0] === '@' ? $.prop(a.slice(1)) : a)]);\n  } catch (ex) {\n    console.error('ERROR: Object.pipes.' + id, ex)\n    return value;\n  }\n}\n\n// Compilation\nexport function expression(v) {\n  if (v[0] === ':') { return placeholder(v); }\n  if (!v.includes('{')) { const r = v in VALUES ? VALUES[v] : v; return () => r; }\n  if (v.match(RE_SINGLE_PLACEHOLDER)) { return placeholder(v.slice(1, -1).trim()); }\n  return stringInterpolation(v);\n}\n\nexport function stringInterpolation(v, fnx = []) {\n  const pattern = v.replace(RE_PLACEHOLDER, (s, expr) => { fnx.push(placeholder(expr)); return '{{' + (fnx.length - 1) + '}}'; });\n  return c => !fnx.length ? pattern : pattern.replace(/\\{\\{(\\d+)\\}\\}/g, (s, idx) => {\n    const r = fnx[idx](c);\n    return !r && r !== 0 ? '' : r;\n  });\n}\n\nexport function placeholder(expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim());\n  const initGettr = (key[0] === ':')\n    ? (fn => c => res.call(c, fn(c)))(stringInterpolation(key.slice(1).trim()))\n    : c => c.prop(key)\n  const pipec = withPipes(pipes)\n  return c => pipec(c, initGettr(c))\n}\n\nexport function withPipes(pipes) {\n  return !pipes.length ? (c, v) => v : (c, initialValue) => pipes.reduce((r, pk) => pipe.call(c, r, pk), initialValue);\n}\n\nconst assignKeyValue = (acc, val, k) => {\n  if (k.slice(0, 5) === 'data-') {\n    acc['data'] = { ...acc['data'], [k.slice(5)]: val in VALUES ? VALUES[val] : val };\n  } else {\n    acc[k] = val;\n  }\n}\n\nconst makeApplicator = (get, k = '_') => (c, acc) => assignKeyValue(acc, get(c), k);\nconst hasSlot = (c, id) => {\n  let r = false;\n  if (id && id != 'default') {\n    c.content && c.content.forEach((e) => { r = r || (e.tag === c.tag + ':' + id) });\n  } else {\n    c.content && c.content.forEach((e) => { r = r || (e.tag.slice(0, c.tag.length + 1) !== c.tag + ':') });\n  }\n  return r\n}\n\nexport const filterMapKey = (src, key) => {\n  const r = new Map();\n  src.forEach((v, k) => { if (k !== key) { r.set(k, v); } });\n  return r;\n};\n\nexport function compileFor({ tag, attrs, uid, nodes }) {\n  const [itemId, , expr] = attrs.get('ui:for').split(' ');\n  const $for = { itemId };\n  const r = { tag: 'ui:for', uid: 'for:' + expr + uid, $for, key: attrs.get('key') };\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ $data: pipec(c.owner, rr) })));\n  } else {\n    (r.updates || (r.updates = [])).push(makeApplicator(expression('{:'.includes(expr[0]) ? expr : '{' + expr + '}'), '$data'));\n  }\n  let $nodes = nodes;\n  if (nodes && nodes.length) {\n    const emptyNode = $nodes.find(e => e.tag === 'ui:empty');\n    if (emptyNode) {\n      $for.emptyNode = emptyNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== emptyNode);\n    }\n    const loadingNode = $nodes.find(e => e.tag === 'ui:loading');\n    if (loadingNode) {\n      $for.loadingNode = loadingNode.nodes.map(compileNode);\n      $nodes = $nodes.filter(e => e !== loadingNode);\n    }\n  }\n  $for.itemNode = compileNode({ tag, attrs: filterMapKey(attrs, 'ui:for'), uid, nodes: $nodes });\n  return r;\n}\n\nexport function compileIf({ tag, attrs, uid, nodes }) {\n  const aIf = attrs.get('ui:if')\n  const iff = {};\n  const r = { tag: 'ui:if', uid: 'if:' + aIf + uid, key: attrs.get('key'), $if: iff, };\n  const neg = aIf[0] === '!';\n  const expr = neg ? aIf.slice(1) : aIf;\n\n  if ((expr.slice(0, 2) === '<-')) {\n    const [key, ...pipes] = expr.slice(2).split('|').map(s => s.trim());\n    const pipec = withPipes(pipes);\n    const applicator = neg ? (c => rr => ({ $data: !pipec(c, rr) })) : (c => rr => ({ $data: (!!pipec(c.owner, rr)) }));\n    (r.inits || (r.inits = [])).push(c => c.connect(key, applicator(c)));\n  } else if ((expr.slice(0, 5) === 'slot(')) {\n    const gttr = c => hasSlot(c, expr.slice(5, -1));\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  } else {\n    const gttr = expression(expr.includes('{') ? expr : '{' + expr + '}');\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = neg ? !gttr(c) : gttr(c); });\n  }\n  let $then = { tag, attrs: filterMapKey(attrs, 'ui:if'), uid, nodes };\n  if (nodes && nodes.length) {\n    const ifElse = nodes.find(e => e.tag === 'ui:else');\n    const ifThen = nodes.find(e => e.tag === 'ui:then');\n    if (ifElse) {\n      iff.else = ifElse.nodes.map(compileNode);\n      $then.nodes = ifThen ? ifThen.nodes : nodes.filter(e => e !== ifElse);\n    } else if (ifThen) {\n      $then.nodes = ifThen.nodes;\n    }\n  }\n  iff.then = [$then].map(compileNode);\n  return r;\n}\n\nexport function compileTag({ attrs, uid, nodes }) {\n  const expr = attrs.get('tag')\n  const r = {\n    tag: 'ui:tag',\n    uid: 'tag:' + expr + uid,\n    $tag: compile({ attrs: filterMapKey(attrs, 'tag'), nodes }),\n  };\n  if ((expr.slice(0, 2) === '<-')) {\n    (r.inits || (r.inits = [])).push(c => c.connect(expr.slice(2).trim(), (rr => ({ $data: rr }))));\n  } else {\n    const gttr = expression(expr);\n    (r.updates || (r.updates = [])).push((c, acc) => { acc['$data'] = gttr(c); });\n  }\n  return r;\n}\nexport function compile(r) {\n  const { attrs, nodes } = r;\n  if (attrs.has('id')) { r.id = attrs.get('id') }\n  if (attrs.has('ui:ref')) { r.ref = attrs.get('ui:ref') }\n  // ui:props\n  if (attrs.has('ui:props')) {\n    const aProps = attrs.get('ui:props');\n    if ((aProps.slice(0, 2) === '<-')) {\n      const [key, ...pipes] = aProps.slice(2).split('|').map(s => s.trim());\n      const pipec = withPipes(pipes);\n      (r.inits || (r.inits = [])).push(c => c.connect(key, rr => pipec(c.owner, rr)));\n    } else {\n      const getter = expression(aProps);\n      (r.updates || (r.updates = [])).push((c, acc) => Object.assign(acc, getter(c)));\n    }\n  }\n  // attrs\n  attrs.forEach((v, k) => {\n    if (k.slice(0, 3) !== 'ui:') {\n      const v2 = v.slice(0, 2)\n      if (v2 === '<-') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const pipec = withPipes(pipes);\n        (r.inits || (r.inits = [])).push(c => c.connect(key, rr => ({ [k]: pipec(c.owner, rr) })));\n      } else if (v2 === '->') {\n        const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim());\n        const expr = expression(key);\n        const pipec = withPipes(pipes);\n        const ekey = '$' + v + ':' + r.uid;\n        const emitter = c => c[ekey] || (c[ekey] = (data, cb) => c.emit(expr(c), pipec(c.owner, data), cb));\n        (r.updates || (r.updates = [])).push((c, acc) => assignKeyValue(acc, emitter(c), k));\n      } else {\n        if (!v.includes('{') && v[0] !== ':' && k.slice(0, 5) !== 'data-') {\n          assignKeyValue((r.initials || (r.initials = {})), v, k);\n        } else {\n          (r.updates || (r.updates = [])).push(makeApplicator(expression(v), k));\n        }\n      }\n    }\n  });\n\n  r.nodes = nodes.map(compileNode)\n\n  return r;\n}\n\nexport function compileNode(node) {\n  if (node.attrs.has('ui:for')) { return compileFor(node); }\n  if (node.attrs.has('ui:if')) { return compileIf(node); }\n  if (node.tag === 'ui:tag') { return compileTag(node); }\n  return compile(node);\n}\n\n","/* eslint-disable no-console */\nimport { render } from './render.js';\nimport { resolveTemplate } from './resolve.js';\n\nlet COUNTER = 1;\n\nconst nextId = (p = '') => p + (COUNTER++);\n\nconst methodName = (x, pre = '') => {\n  if (!x) { return pre; }\n  const s = `${x}`;\n  return pre + s[0].toUpperCase() + s.slice(1);\n};\n\nfunction bindFn(f) {\n  const $ = this;\n  const map = $.$boundFnMap || ($.$boundFnMap = new Map());\n  let fn = map.get(f);\n  if (!fn) {\n    const bound = f.bind($.impl);\n    fn = (...args) => {\n      const r = bound(...args);\n      if (r) {\n        $.up(r)\n      }\n    }\n    map.set(f, fn);\n  }\n  return fn;\n}\n\nconst upAsync = ($, promise, key) => {\n  const racer = $.raceCondition('set:' + (key || 'up'));\n  const up = r => racer(() => $.up(r))\n  if (key && key !== '...') {\n    const akey = key.replace('Promise', '')\n    promise.then(val => up({ [akey + 'Error']: null, [akey]: val }), error => up({ [akey + 'Error']: error }));\n  } else {\n    promise.then(up, error => up({ error }));\n  }\n  return promise;\n}\nconst propGetter = ($, key) => {\n  const map = $.$propFnMap || ($.$propFnMap = {});\n  let fn = map[key];\n  if (fn) { return fn; }\n\n  const impl = $.impl\n  const [pk, ...path] = key.split('.')\n  const gettr = impl[methodName(pk, 'get')];\n\n  const extractor1 = gettr\n    ? () => gettr.call(impl)\n    : ($$ = impl.get ? impl.get(impl) : impl) =>\n      ((pk in $$) ? $$[pk] : undefined);\n\n  fn = !path.length\n    ? extractor1\n    : () => path.reduce((r, p) => (r ? r[p] : r), extractor1())\n\n  return map[key] = fn;\n}\n\n\nexport class Component {\n\n  constructor(Ctor, options) {\n    Object.assign(this, options);\n    const { ref, parent, props } = this;\n    if (parent) {\n      this.app = parent.app;\n      this.ctx = this.elt = parent.elt;\n      this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n      this.impl.app = this.app;\n      if (ref) {\n        const hidden = this.app[ref];\n        this.app[ref] = this.impl;\n        this.defer(() => { this.app[ref] = hidden })\n      }\n    } else {\n      this.app = this.impl = new Ctor(props, this);\n      this.impl.$ = this;\n    }\n  }\n\n  /**\n   * Rendering.\n   */\n\n  render() {\n    this.ctx.cursor = this.prevElt;\n    if (this.impl.render) {\n      this.impl.render(this, render);\n    } else {\n      render(this);\n    }\n  }\n\n  resolveTemplate() {\n    if (this.impl.resolveTemplate) {\n      return this.impl.resolveTemplate(this);\n    }\n    return resolveTemplate(this, this.impl.constructor.$TEMPLATE())\n  }\n\n  /**\n   * Life-cycle hooks.\n   */\n  init() {\n    if (this.isDone || this.isInited) { return; }\n    this.isInited = true;\n    if (this.inits) {\n      this.inits.forEach(f => this.defer(f(this)));\n      delete this.inits;\n    }\n    if (this.impl.init) {\n      const d = this.impl.init(this)\n      if (d) { this.up(d); }\n    }\n  }\n\n  done() {\n    if (this.isDone) { return; }\n    this.isDone = true;\n    if (this.impl.done) {\n      this.impl.done(this);\n    }\n    if (this.children) {\n      this.children.forEach(c => { c.parent = null; c.done(); })\n    }\n    if (this.parent) {\n      this.parent.children.delete(this.uid);\n    }\n    if (this.prevElt) {\n      this.prevElt.nextElt = this.nextElt;\n    }\n    if (this.defered) {\n      this.defered.forEach(f => f(this));\n      delete this.defered;\n    }\n    ['parent', 'children', 'owner', 'impl', 'app', 'ctx'].forEach(k => { delete this[k]; });\n  }\n\n  /**\n   * State.\n   */\n  up(Î”) {\n    if (this.isDone) { return; }\n    let changed = this.set(Î”);\n    this.render();\n    if (this.ref && changed) { this.notify(); }\n  }\n\n  set(Î”) {\n    const $ = this;\n    const impl = $.impl;\n    let changed = false;\n    if (impl.set) {\n      changed = impl.set(Î”);\n    } else if (Î”) {\n      if (Î”.then) {\n        upAsync($, Î”);\n      } else {\n        Object.entries(Î”).forEach(([k, their]) => {\n          if (their && their.then) {\n            upAsync($, their, k);\n          } else if (k && typeof their !== 'undefined' && their !== impl[k]) {\n            const setter = impl['set' + k[0].toUpperCase() + k.slice(1)];\n            if (setter) { setter.call(impl, their); } else { impl[k] = their; }\n            changed = true;\n          }\n        });\n      }\n    }\n    return changed;\n  }\n\n  prop(propId) {\n    const value = propGetter(this, propId)();\n    return (typeof value === 'function') ? bindFn.call(this, value) : value;\n  }\n\n  /**\n   *  Arrows.\n   */\n  notify() {\n    if (this.listeners && !this.notifying) {\n      this.notifying = true\n      this.listeners.forEach(e => e(this.impl))\n      this.notifying = false\n    }\n  }\n\n  subscribe(fn) {\n    const uuid = nextId();\n    const listeners = (this.listeners || (this.listeners = new Map()))\n    fn(this.impl);\n    listeners.set(uuid, fn);\n    return () => listeners.delete(uuid);\n  }\n\n  connect(key, applicator) {\n    const [type = this.ref, target] = key.split('.');\n    const ref = type === 'this' ? this.impl : this.app[type];\n    if (!ref) { console.error('connect: No such ref ' + type, key) }\n    return ref && ref.$.subscribe(() => {\n      try {\n        const value = ref.$.prop(target);\n        this.up(applicator ? (value && value.then ? value.then(applicator) : applicator(value)) : value)\n      } catch (ex) {\n        console.error('connect ' + type + ':' + target, ex)\n      }\n    });\n  }\n\n  emit(key, data) {\n    const $ = this;\n\n    if (!key || !key.includes('.')) {\n      return $.up(key ? { [key]: data } : data)\n    }\n\n    const [type, target] = key.split('.');\n    const event = { data, ...data };\n\n    const ref = type === 'this' ? $.impl : $.app[type];\n    if (!ref) {\n      console.warn('emit: No such ref ' + type);\n      return;\n    }\n    try {\n\n      const method = ref[methodName(target, 'on')];\n      if (!method) { throw new ReferenceError('emit ' + type + ': No such method ' + methodName(target, 'on')) }\n\n      const result = method.call(ref, event, ref, ref.$);\n      this.log(type + ':' + methodName(target, 'on'), result, event, ref)\n      if (result) { ref.$.up(result) }\n\n    } catch (ex) {\n      console.error('emit ' + key + ':', ex)\n    }\n  }\n\n  /**\n   * Routines.\n   */\n\n  raceCondition(key) {\n    const COUNTERS = this.$weak || (this.$weak = new Map())\n    let counter = 1 + (COUNTERS.get(key) || 0);\n    COUNTERS.set(key, counter)\n    return (fn) => {\n      if (counter === COUNTERS.get(key)) {\n        counter = 0;\n        fn()\n      }\n    }\n  }\n\n  defer(fn) { if (fn && typeof fn === 'function') { (this.defered || (this.defered = [])).push(fn); } }\n\n  log(...args) {\n    console.log(this.tag + this.uid, ...args)\n  }\n}\n","import { render } from './render.js';\nimport { Component } from './component.js';\nimport { registerTypes } from './register.js';\n\nconst camelize = (key, sep = '_', jn = ' ') => ('' + key).split(sep).map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(jn);\n\n// DOM\nconst DOM_SETTERS = {\n  '#text': (e, v) => (e.textContent = v == null ? '' : v),\n  disabled: (e, v) => (e.disabled = v ? true : null),\n  class: (e, v) => {\n    if (v.includes(':')) {\n      v = ('' + v).split(' ').map(s => {\n        const [cl, expr] = s.split(':')\n        if (expr === undefined) return cl;\n        const [fl, eq] = expr.split('==');\n        const disabled = eq ? fl !== eq : ['', '0', 'false', null].indexOf(fl) > -1;\n        return disabled ? '' : cl;\n      }).join(' ')\n    }\n    e.className = v;\n  },\n  selected: (e, v) => (e.selected = v ? true : null),\n  value: (e, v) => (e.value = v == null ? '' : v),\n  checked: (e, v) => (e.checked = !!v),\n  init: function (e, v) {\n    this.init = () => v(e, this)\n  },\n  data: function (e, v) {\n    if (v && e.$dataset) {\n      Object.keys(e.$dataset).forEach(k => { if (!v[k]) { e.dataset[camelize(k, '-', '')] = null } });\n    }\n    e.$dataset = { ...v };\n    if (v) {\n      Object.keys(v).forEach(k => { e.dataset[camelize(k, '-', '')] = v[k]; });\n    }\n  },\n  click: function (e, v) {\n    this.setAttribute('click:click', !v ? null : (ev) => {\n      this.$attributes.click({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  'bubble-click': function (e, v) {\n    this.setAttribute('bubbled-click:click', !v ? null : (ev) => {\n      this.$attributes['bubble-click']({ ...e.$dataset }, ev);\n      return true;\n    });\n  },\n  blur: function (e, v) {\n    this.setAttribute('blur:blur', !v ? null : (ev) => {\n      this.$attributes.blur({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  dblclick: function (e, v) {\n    this.setAttribute('dblclick:dblclick', !v ? null : (ev) => {\n      this.$attributes.dblclick({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  scroll: function (e, v) {\n    this.setAttribute('scroll:scroll', !v ? null : (ev) => {\n      this.$attributes.scroll({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  error: function (e, v) {\n    this.setAttribute('error:error', !v ? null : (ev) => {\n      const fn = this.getAttribute('error');\n      fn && fn({ ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  keypress: function (e, v) {\n    this.setAttribute('keypress:keyup', !v ? null : (ev) => {\n      if (ev.keyCode !== 13 && ev.keyCode !== 27) {\n        const fn = this.$attributes.keypress;\n        fn && fn({ value: e.value, ...e.$dataset }, ev);\n        setTimeout(() => e.focus(), 0)\n      }\n      return false;\n    });\n  },\n  enter: function (e, v) {\n    this.setAttribute('enter:keyup', !v ? null : (ev) => {\n      if (ev.keyCode === 13) {\n        this.$attributes.enter({ value: e.value, ...e.$dataset }, ev);\n      }\n      if (ev.keyCode === 13 || ev.keyCode === 27) {\n        e.blur();\n      }\n      return false;\n    });\n  },\n  change: function (e, v) {\n    this.setAttribute('change:change', !v ? null : (ev) => {\n      this.$attributes.change({ value: e.value, ...e.$dataset }, ev);\n      return false;\n    });\n  },\n  toggle: function (e, v) {\n    this.setAttribute('toggle:change', !v ? null : (ev) => {\n      this.$attributes.toggle({ value: e.checked, ...e.$dataset }, ev);\n      return false;\n    });\n  }\n};\n\nconst DOM_VALUE_COMPARATORS = {\n  value: (e, their) => (e.value === their),\n  _: (_, their, mine) => their === mine\n};\n\nclass Element {\n\n  constructor(attrs = {}, $) {\n    this.elt = $.elt = $.tag === '#text' ? document.createTextNode('') : document.createElement($.tag);\n    this.$attributes = {}\n    this.$ = this.elt.$ = $;\n    this.applyAttributes(attrs);\n  }\n  done() {\n    const e = this.elt;\n    const lstnrs = this.$listeners;\n    if (lstnrs) {\n      Object.keys(lstnrs).forEach(k => e.removeEventListener(k, lstnrs[k]));\n      this.$listeners = null;\n    }\n    const p = e.parentElement;\n    if (p) {\n      p.removeChild(e);\n    }\n    this.elt = this.$attributes = null;\n  }\n  set(delta) {\n    this.delta = this.delta ? Object.assign(this.delta, delta) : delta;\n    return this.$.nodes || delta && Object.keys(delta).length;\n  }\n  render($) {\n    const e = this.elt;\n    const p = $.ctx;\n    if ($.content) {\n      e.cursor = null;\n      render($, $.content);\n      e.cursor = null;\n    }\n    if (this.delta) {\n      this.applyAttributes(this.delta);\n      this.delta = null;\n    }\n    const before = p.cursor ? p.cursor.nextSibling : p.firstChild;\n    if (!before) {\n      if (p !== e.parentElement) {\n        p.appendChild(e);\n      }\n    } else if (e !== before) {\n      p.insertBefore(e, before);\n    }\n    p.cursor = e;\n  }\n  applyAttributes(theirs) {\n    const e = this.elt;\n    const mines = this.$attributes;\n    for (let key in theirs) {\n      if (Object.prototype.hasOwnProperty.call(theirs, key) && !(DOM_VALUE_COMPARATORS[key] || DOM_VALUE_COMPARATORS._)(e, theirs[key], mines[key])) {\n        const value = theirs[key];\n        const setter = DOM_SETTERS[key];\n        // console.log('setAttribute' + this.$.tag, key, value)\n        if (setter) {\n          setter.call(this, e, value);\n        } else {\n          this.setAttribute(key, value);\n        }\n      }\n    }\n    this.$attributes = theirs;\n  }\n  getAttribute(key, def) {\n    return (this.$attributes && this.$attributes[key]) || def\n  }\n  setAttribute(key, value) {\n    if (value != null) {\n      if (typeof value === 'function') {\n        const fnValue = (...args) => { if (!this.isDone) { value(...args) } }\n        if (!this.listeners) {\n          this.listeners = new Map();\n        }\n        if (!this.listeners.has(key)) {\n          const [akey, ekey = akey] = key.split(':')\n          this.elt.addEventListener(ekey, fnValue, false);\n          this.listeners.set(key, fnValue);\n        }\n      } else {\n        this.elt.setAttribute(key, value);\n      }\n    } else {\n      if (this.listeners && this.listeners.has(key)) {\n        const [akey, ekey = akey] = key.split(':')\n        this.elt.removeEventListener(ekey, this.listeners.get(key));\n        this.listeners.delete(key);\n      } else {\n        this.elt.removeAttribute(key);\n      }\n    }\n  }\n}\n\nclass WebClientApp {\n  constructor(props, $) {\n    Object.assign(this, props);\n    $.elt = $.ctx = props.rootElement || document.body;\n  }\n}\nWebClientApp.Element = Element;\n\nexport function launch({ types, App = WebClientApp, ...props } = {}) {\n  App.template = App.template || `<${types[0].name || types[0].NAME}/>`;\n  registerTypes([App, App.Element].concat(types))\n  const a = new Component(App, { props });\n\n  const fn = () => { render(a); a.init(); }\n  if (typeof window === 'object') {\n    window.requestAnimationFrame(fn);\n  } else {\n    fn()\n  }\n\n  return a.impl;\n}\n\nif (typeof window === 'object') {\n  window.launch = launch;\n}","import { resolveTemplate } from './resolve.js';\n\nexport class Fragment {\n    resolveTemplate($) {\n        return $.content;\n    }\n}\n\nexport class FragmentFor {\n    resolveTemplate($) {\n        const acc = new Map();\n        const { $data: data } = $.impl;\n        const { itemId, itemNode, emptyNode, loadingNode } = $.$for;\n        const { tag, updates, initials = {}, nodes, uid } = itemNode;\n        if (data && data.length) {\n            if (!data.forEach) {\n                throw new Error('wrong ui:for data', data)\n            }\n            data.forEach((d, index) => {\n                const id = `${uid}-$${d.id || index}`;\n                const $ownerImpl = Object.assign(Object.create($.owner.impl), { [itemId]: d, [itemId + 'Index']: index })\n                const up = Î” => $.owner.up(Î”)\n                const $owner = Object.assign(Object.create($.owner), { impl: $ownerImpl, $propFnMap: {}, up })\n                resolveTemplate($owner, { tag, initials, updates, nodes, uid: id }, acc);\n            });\n        } else if (!data) {\n            if (loadingNode) { resolveTemplate($.owner, loadingNode, acc); }\n        } else if (!data.length) {\n            if (emptyNode) { resolveTemplate($.owner, emptyNode, acc); }\n        }\n        return acc;\n    }\n}\n\nexport class FragmentIf {\n\n    resolveTemplate($) {\n        const $if = $.$if;\n        const { $data } = $.impl;\n        const node = $data ? $if.then : $if.else;\n        return resolveTemplate($.owner, node);\n    }\n}\n\nexport class FragmentTag {\n    resolveTemplate($) {\n        const acc = new Map();\n        const tag = $.impl.$data;\n        if (tag) {\n            resolveTemplate($.owner, { ...$.$tag, tag, uid: tag + ':' + $.uid }, acc);\n        }\n        return acc;\n    }\n}\n\n","export { launch } from './dom.js';\n","import { parseXML } from './xml.js';\nimport { compileNode } from './compile.js';\nimport { Fragment, FragmentFor, FragmentIf, FragmentTag } from './fragment.js';\n\nlet COUNTER = 1;\n\nlet ANY;\n\nconst nextId = (p = '') => p + (COUNTER++);\n\nconst fnName = ctor => (/^function\\s+([\\w$]+)\\s*\\(/.exec(ctor.toString()) || [])[1] || nextId('$C');\n\nconst REGISTRY = new Map([\n    ['ui:fragment', Fragment],\n    ['ui:for', FragmentFor],\n    ['ui:if', FragmentIf],\n    ['ui:tag', FragmentTag],\n]);\n\nconst reg = ctr => {\n    const ctor = typeof ctr === 'function' ? ctr : Object.assign(function () { }, ctr);\n    const name = ctor.NAME || ctor.name || fnName(ctor);\n    const text = ctor.TEMPLATE || ctor.template || ctor.prototype.TEMPLATE;\n    ctor.$TEMPLATE = () => {\n        try {\n            const T = text ? compileNode(parseXML(typeof text === 'function' ? text() : text, name)) : [];\n            ctor.$TEMPLATE = () => T;\n            return T;\n        } catch (ex) {\n            // eslint-disable-next-line no-console\n            console.error('compile ' + name, ex)\n        }\n        return []\n    }\n    if (name === 'Element') {\n        ANY = ctor\n    } else {\n        REGISTRY.set(name, ctor);\n    }\n};\n\nexport const registerTypes = types => types.forEach(reg);\n\nexport const getByTag = tag => REGISTRY.get(tag) || ANY;","import { getByTag } from './register.js';\nimport { Component } from './component.js';\n\nexport const render = (c, $content = c.resolveTemplate()) => {\n    if (!$content || !$content.size) {\n        if (c.children) { c.children.forEach(cc => cc.done()); }\n        return;\n    }\n    if (c.children) { c.children.forEach(cc => !$content.has(cc.uid) ? cc.done() : 0); }\n    const ch = c.children || (c.children = new Map());\n    $content.forEach(({ tag, content, owner, props, inits, initials, ref, $if, $for, $tag }, uid) => {\n        let cc = ch.get(uid);\n        if (!cc) {\n            if (initials) {\n                props = props && props.data && initials.data\n                    ? { ...props, ...initials, data: { ...initials.data, ...props.data } }\n                    : { ...props, ...initials }\n            }\n            cc = new Component(\n                getByTag(tag),\n                { props, tag, ref, $if, $for, $tag, uid, owner, inits, parent: c }\n            );\n            ch.set(uid, cc);\n        }\n        cc.owner = owner;\n        cc.content = content;\n        cc.prevElt = c.elt.cursor;\n        cc.up(props);\n    });\n    if (c.children) { c.children.forEach(cc => !cc.isInited ? cc.init() : 0); }\n};\n","const resolveSlot = (owner, id, acc) => {\n    let $ = owner\n    $.content && $.content.forEach((v) => {\n        if (id) {\n            if ((v.tag === $.tag + ':' + id) && v.content) {\n                v.content.forEach(vv => acc.set(vv.uid, vv));\n            }\n        } else if (v.tag.slice(0, $.tag.length + 1) !== $.tag + ':') {\n            acc.set(v.uid, v);\n        }\n    });\n    return acc;\n};\n\nconst resolveTemplateArray = (owner, tmpl, acc = new Map()) =>\n    tmpl && tmpl.length ? tmpl.reduce((m, t) => resolveTemplate(owner, t, m), acc) : null;\n\nconst resolveProps = (props, c) =>\n    props && props.length ? props.reduce((acc, fn) => { fn(c, acc); return acc; }, {}) : null;\n\nfunction resolveRegular(acc, owner, { tag, updates, initials, inits, nodes, uid, id, ref, $if, $for, $tag }) {\n    if (tag === 'ui:slot') { return resolveSlot(owner, id, acc); }\n    const props = resolveProps(updates, owner);\n    const content = resolveTemplateArray(owner, nodes)\n    return acc.set(uid, { tag, id, uid, ref, owner, initials, inits, $if, $for, $tag, props, content });\n}\n\nexport function resolveTemplate(owner, tmpl, acc = new Map()) {\n    if (!tmpl) { return acc; }\n    if (tmpl.reduce) { return tmpl.length ? resolveTemplateArray(owner, tmpl, acc) : acc; }\n    return resolveRegular(acc, owner, tmpl);\n}\n","// ==========\n// XML Parse for templates. XML -> NodeTree\n// ----------\nconst RE_XML_ENTITY = /&#?[0-9a-z]{3,5};/g;\nconst RE_XML_COMMENT = /<!--((?!-->)[\\s\\S])*-->/g;\nconst RE_ATTRS = /([a-z][a-zA-Z0-9-:]+)(=\"[^\"]*\"|={[^}]*})?/g;\nconst RE_ESCAPE_XML_ENTITY = /[\"'&<>]/g;\nconst RE_XML_TAG = /(<)(\\/?)([a-zA-Z][a-zA-Z0-9-:]*)((?:\\s+[a-z][a-zA-Z0-9-:]+(?:=\"[^\"]*\"|={[^}]*})?)*)\\s*(\\/?)>/g;\nconst SINGLE_TAGS = 'img input br col'.split(' ').reduce((r, e) => { r[e] = 1; return r; }, {});\nconst SUBST_XML_ENTITY = {\n    amp: '&',\n    gt: '>',\n    lt: '<',\n    quot: `\"`,\n    nbsp: ' '\n};\nconst ESCAPE_XML_ENTITY = {\n    34: '&quot;',\n    38: '&amp;',\n    39: '&#39;',\n    60: '&lt;',\n    62: '&gt;'\n};\nconst RE_EMPTY = /^\\s*$/\nconst FN_ESCAPE_XML_ENTITY = m => ESCAPE_XML_ENTITY[m.charCodeAt(0)];\nconst FN_XML_ENTITY = function (_) {\n    const s = _.substring(1, _.length - 1);\n    return s[0] === '#' ? String.fromCharCode(+s.slice(1)) : (SUBST_XML_ENTITY[s] || ' ');\n};\nconst decodeXmlEntities = (s = '') => s.replace(RE_XML_ENTITY, FN_XML_ENTITY);\nconst escapeXml = (s) => !s ? '' : ('' + s).replace(RE_ESCAPE_XML_ENTITY, FN_ESCAPE_XML_ENTITY);\nconst skipQoutes = (s) => s[0] === '\"' && s[s.length - 1] === '\"' ? s.slice(1, -1) : s;\n\nlet UID = 1;\n\nconst parseAttrs = (s) => {\n    const r = new Map();\n    if (!s) { return r; }\n    for (let e = RE_ATTRS.exec(s); e; e = RE_ATTRS.exec(s)) {\n        if (!e[2]) {\n            r.set(e[1], \"true\");\n        } else {\n            r.set(e[1], decodeXmlEntities(skipQoutes(e[2].slice(1))));\n        }\n    }\n    return r;\n};\nconst stringifyAttrs = (attrs) => {\n    if (!attrs || !attrs.size) {\n        return '';\n    }\n    const r = [];\n    attrs.forEach((v, k) => {\n        if (v && k !== '#text') {\n            r.push(' ' + k + '=\"' + escapeXml(v) + '\"');\n        }\n    });\n    return r.join('');\n};\n\nclass Node {\n    constructor(tag, attrs = new Map()) {\n        this.uid = UID++;\n        this.tag = tag || '';\n        this.attrs = attrs;\n        this.nodes = [];\n    }\n    getChild(index) {\n        return this.nodes[index];\n    }\n    setText(text) {\n        this.attrs.set('#text', decodeXmlEntities(text));\n    }\n    addChild(tag, attrs) {\n        const e = new Node(tag, attrs);\n        this.nodes.push(e);\n        return e;\n    }\n    toString() {\n        return stringify(this);\n    }\n}\n\nexport function stringify({ tag, attrs, nodes = [] }, tab = '') {\n    const sattrs = stringifyAttrs(attrs);\n    const ssubs = nodes.map(c => stringify(c, `  ${tab}`)).join('\\n');\n    const text = attrs && attrs.get('#text');\n    const stext = text ? `  ${tab}${escapeXml(text)}` : '';\n    if (tag === '#text') {\n        return stext.trim()\n    }\n    return `${tab}<${tag}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}>`);\n}\n\nexport const parseXML = (_s, key) => {\n    const s = ('' + _s).trim().replace(RE_XML_COMMENT, '');\n    const ctx = [new Node()];\n    let lastIndex = 0;\n    // head text omitted\n    for (let e = RE_XML_TAG.exec(s); e; e = RE_XML_TAG.exec(s)) {\n        // preceding text\n        const text = e.index && s.slice(lastIndex, e.index);\n        if (text && !text.match(RE_EMPTY)) {\n            ctx[0].addChild('#text').setText(text);\n        }\n        // closing tag\n        if (e[2]) {\n            if (ctx[0].tag !== e[3]) {\n                throw new Error(\n                    (key || '') + ' XML Parse closing tag does not match at: ' + e.index +\n                    ' near ' +\n                    e.input.slice(Math.max(e.index - 150, 0), e.index) +\n                    '^^^^' +\n                    e.input.slice(e.index, Math.min(e.index + 150, e.input.length))\n                );\n            }\n            ctx.shift();\n        } else {\n            const elt = ctx[0].addChild(e[3], parseAttrs(e[4]));\n            // not single tag\n            if (!(e[5] || (e[3] in SINGLE_TAGS))) {\n                ctx.unshift(elt);\n                if (ctx.length === 1) {\n                    throw new Error('Parse error at: ' + e[0]);\n                }\n            }\n        }\n        // up past index\n        lastIndex = RE_XML_TAG.lastIndex;\n    }\n    // tail text omitted\n    return ctx[0].getChild(0);\n};\n"],"sourceRoot":""}